<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
    <link rel="stylesheet" href="style.css">
    <title>CBLV Invest Tool</title>
</head>
<body>
    
    <div id="preloader"> 

        <div id="loader">    
        <div class="sk-cube-grid">
    <div class="sk-cube sk-cube1"></div>
    <div class="sk-cube sk-cube2"></div>
    <div class="sk-cube sk-cube3"></div>
    <div class="sk-cube sk-cube4"></div>
    <div class="sk-cube sk-cube5"></div>
    <div class="sk-cube sk-cube6"></div>
    <div class="sk-cube sk-cube7"></div>
    <div class="sk-cube sk-cube8"></div>
    <div class="sk-cube sk-cube9"></div>
    </div>
        </div>
      </div>
<div class="main">

<div class="form-section">

<!--<h1 class="heading">Investment in Cross-border Project</h1> -->
<img src="investbanner.png" class="center" >

<div> 
  <p>
  <a> <b> Welcome to the CBLV Invest Tool! </b> </a>
  <br>

  <p> <small> Use this form to allocate the $2,000,000 SERS Dollars assigned to you. To begin, enter your email. Then, use the dropdown menu to select the project you would like to invest in. Type in the amount you would like to allocate to that project. An error message will appear at the top of your screen if you did not complete the form properly. Click the link at the end to keep track of who is ahead!
<br>
<br>
 

      Here are the rules: </small>  </p>
<ul> 
<small>

<li>You may invest the $2M SERS Dollars in one to three different CBLV projects.</li>
<li>You may not invest in your own project.</li>
<li> You must invest all $2M SERS Dollars allocated to you (canâ€™t be over or under).</li>
<li>Acceptable amounts are integers from 1 to 2000000.</li>
<li>Do not include symbols, commas or decimals in the amount.</li>
<li>You may overwrite your investment allocation(s) by submitting a new entry. The last one entered will be counted.</li>
<li>Investments must be submitted before 11:59 p.m. Ottawa time on August 25, 2021.</li>

</small>
</ul>
<br>

<a> <b> <u> Allocate your SERS Dollars below </u> </b> </a>
</p>
</div>


<form id="myForm" action="https://sheetdb.io/api/v1/rv1dl3h9j8xnc" method="POST">
    <div>
        <h4><label> Verify registered email:</label>
            <input name="data[email]" class='input-email' type="email" required></h4>
    </div>
    <h4><br><label>First project: </label>
        <select id="coya" name="data[projecta]" required="">
                <option value="">choose...</option>
                <option value="ProjectA">Project A</option>
                <option value="ProjectB">Project B</option>
                <option value="ProjectC">Project C</option>
                <option value="ProjectD">Project D</option>
                <option value="ProjectE">Project E</option>
                <option value="ProjectF">Project F</option>
                <option value="ProjectG">Project G</option>
                <option value="ProjectH">Project H</option>
                <option value="ProjectI">Project I</option>
                <option value="ProjectJ">Project J</option>
                <option value="ProjectK">Project K</option>
                <option value="ProjectL">Project L</option>
                <option value="ProjectM">Project M</option>
                <option value="ProjectN">Project N</option>

            </select><br><label>Amount to invest in first project: </label>
        <input type="number" id="amounta" class="input-f" name="data[amounta]" required></h4>
    <h4><br><label>Second project: </label>
        <select id="coyb" name="data[projectb]" >
                <option value="">choose..</option>
                <option value="ProjectA">Project A</option>
                <option value="ProjectB">Project B</option>
                <option value="ProjectC">Project C</option>
                <option value="ProjectD">Project D</option>
                <option value="ProjectE">Project E</option>
                <option value="ProjectF">Project F</option>
                <option value="ProjectG">Project G</option>
                <option value="ProjectH">Project H</option>
                <option value="ProjectI">Project I</option>
                <option value="ProjectJ">Project J</option>
                <option value="ProjectK">Project K</option>
                <option value="ProjectL">Project L</option>
                <option value="ProjectM">Project M</option>
                <option value="ProjectN">Project N</option>

            </select><br><label>Amount to invest in second project: </label>
        <input type="number" id="amountb" class="input-s" name="data[amountb]" ></h4>
    <h4><br><label>Third project: </label>
        <select id="coyc" name="data[projectc]" >
                <option value="">choose...</option>
                <option value="ProjectA">Project A</option>
                <option value="ProjectB">Project B</option>
                <option value="ProjectC">Project C</option>
                <option value="ProjectD">Project D</option>
                <option value="ProjectE">Project E</option>
                <option value="ProjectF">Project F</option>
                <option value="ProjectG">Project G</option>
                <option value="ProjectH">Project H</option>
                <option value="ProjectI">Project I</option>
                <option value="ProjectJ">Project J</option>
                <option value="ProjectK">Project K</option>
                <option value="ProjectL">Project L</option>
                <option value="ProjectM">Project M</option>
                <option value="ProjectN">Project N</option>
            </select><br><label>Amount to invest in third project: </label>         
        <input type="number" id="amountc" class="input-t" name="data[amountc]" ></h4>
         <br>
    <button type="submit" class="btn-primary">Submit Investment</button>
    <br>
    <br>

    <div><a href="https://datastudio.google.com/u/1/reporting/fd890c97-1455-4d87-ba43-d4067eb4f93c/page/OdPXC" target="_blank">View the live CBLV Project Showcase investment dashboard</a>
</div>
</form>
</div>



</div>    
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<script>
    var form = document.getElementById('myForm');
     form.addEventListener("submit", e => {
      e.preventDefault();

      var firstProjectSelectOption = document.getElementById('coya').value;
      var secondProjectSelectOption = document.getElementById('coyb').value;
      var thirdProjectSelectOption = document.getElementById('coyc').value;
      var val1 = document.getElementById('amounta').value;
      var val2 = document.getElementById('amountb').value;
      var val3 = document.getElementById('amountc').value;
      var total = Number(val1)+ Number(val2)+ Number(val3);
      console.log('total==>',total)
    
      var projectValues = [firstProjectSelectOption,secondProjectSelectOption,thirdProjectSelectOption];

      console.log(JSON.stringify(projectValues));

      var projectValueAlreadyExists = false;
      var errorMessages = [];

      //check the project name values
      for(var i = 0; i< projectValues.length;i++){
        for(var j = i + 1; j< projectValues.length;j++){
            console.log("comparing values:"+projectValues[i]+projectValues[j]);
            if(projectValues[i] === projectValues[j]){
                console.log(projectValues[i] + "  can not be selected more than once");
                errorMessages.push(projectValues[i] + " can not be selected more than once");
                break;
            }
        }
        if(errorMessages.length !== 0 ){
            break;
        }
      }

    
       //check the total project amount
      if(total !== 2000000 ){
        errorMessages.push('Amount should be equal to 2 Million');         
      }
      if (val1 < 0) {
      errorMessages.push('Amount in first investment must be positive');         
      }
      if (val2 < 0) {
      errorMessages.push('Amount in second investment must be positive');         
      }
      if (val3 < 0) {
      errorMessages.push('Amount in second investment must be positive');         
      }

      if (firstProjectSelectOption == "") {
      errorMessages.push('you must select a value in the first Project');         
      }

      if (secondProjectSelectOption == "") {
      errorMessages.push('you must select a value in the second Project');         
      }

      if (thirdProjectSelectOption == "") {
      errorMessages.push('you must select a value in the third Project');         
      }

      if(errorMessages.length !== 0 ){
        for(var i=0;i<errorMessages.length;i++){
            alert(errorMessages[i]);
        }
      }else{
        fetch(form.action, {
          method : "POST",
          body: new FormData(document.getElementById("myForm")),
      }).then(
          response => response.json()
      ).then((html) => {
        window.location.href="https://www.canva.com/design/DAEmlAMISQ8/n2Z7ArhIw8-VwQR7kqC-sg/view";
    
      });
      }

      

    });
    
    function showSite(){
        $('#loader').fadeOut(); // will first fade out the loading animation 
        $('#preloader').delay(60).fadeOut('slow'); // will fade out the white DIV that covers the website. 
        $('body').delay(60).css({'overflow':'visible'});
  }
      $(window).on('load', function() { // makes sure the whole site is loaded 
      setTimeout(function(){ showSite() }, 1000);
      })
            
  </script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>
